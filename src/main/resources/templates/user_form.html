<!DOCTYPE html>
<!--
文档路径: docs\datatable.html
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <title>填写表单</title>
    <meta name="description" content="Initialized via remote ajax json data">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">

    <link href="assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css" />
    <link href="assets/demo/default/base/style.bundle.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="table/bootstrap.min.css">
    <script src="table/jquery-1.10.2.min.js"></script>
    <script src="table/bootstrap.min.js"></script>
    <style>
        html{
            width:100%;
            overflow-x:hidden;
        }
    </style>
</head>
<body>
<div style="padding: 20px 20px;">
    <div class="m-portlet m-portlet--mobile ">
        <div class="m-portlet__head">
            <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                    <h3 class="m-portlet__head-text">
                        用户列表
                    </h3>
                </div>
            </div>
        </div>
        <div class="m-portlet__body">
            <div class="m-form m-form--label-align-right m--margin-top-20 m--margin-bottom-30">
                <div class="row align-items-center">
                    <div class="col-xl-12 order-1 order-xl-2 m--align-right">
                        <a href="#addUserModal" data-toggle="modal" class="btn btn-primary m-btn m-btn--custom m-btn--icon m-btn--air m-btn--pill">
                            <span>
                                <i class="la la-cart-plus"></i>
                                <span id="addUser" >添加用户</span>
                            </span>
                        </a>
                        <div class="m-separator m-separator--dashed d-xl-none"></div>
                    </div>
                </div>
            </div>
            <!--begin: Datatable -->
            <div class="m_datatable" id="userTable">

            </div>
            <!--end: Datatable -->
        </div>
    </div>


</div>
<!-- 添加用户模态框（Modal） -->
<div class="modal fade" id="addUserModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="addUserModalTitle">
                    添加用户
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <form class="form-group">
                    <label>用户名</label><span style="color:red">(*)</span>
                    <input type="text" class="form-control" id="username" placeholder="请输入用户名" name="username">
                    <label>密码</label><span style="color:red">(*)</span>
                    <input type="text" class="form-control" id="password" placeholder="请输入密码" name="password">
                    <label>真实姓名</label>
                    <input type="text" class="form-control" id="realName" placeholder="请输入" name="realName">
                    <label>手机号</label>
                    <input type="text" class="form-control" id="tel" placeholder="请输入" name="tel">
                    <label>邮箱</label>
                    <input type="text" class="form-control" id="email" placeholder="请输入" name="email">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">
                    提交
                </button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!--begin::Global Theme Bundle -->
<script src="assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
<script src="assets/demo/default/base/scripts.bundle.js" type="text/javascript"></script>
<!--end::Global Theme Bundle -->


</body>
<script th:inline="javascript">
    //加载表格
    var DatatableRemoteAjaxDemo = {
        init: function () {
            //表格头
            var data = [{
                    field: 'id',
                    title: '用户编号',
                }, {
                    field: 'username',
                    title: '用户名',
                }, {
                    field: 'realName',
                    title: '真实姓名',
                },{
                    field: 'createTime',
                    title: '创建时间',
                },{
                "field":"Actions",
                "width":110,
                "title":"操作",
                "template":function() {
                    return'<a href="#" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" title="Edit details"><i class="la la-edit" onclick="updateUser(this)"></i></a>'+
                        '<a href="#" class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill" title="Delete"><i class="la la-trash" onclick="deleteUser(this)"></i></a>';
                }
            }
            ];
            var t;
            t = $("#userTable").mDatatable({
                data: {
                    type: "remote",
                    source: {
                        read: {
                            url: "/openticket/user/list",
                            map: function (t) {
                                var e = t;
                                return void 0 !== t.data && (e = t.data),
                                    e
                            }
                        }
                    },
                    pageSize: 10,
                    serverPaging: !0,
                    serverFiltering: !0,
                    serverSorting: !0
                },
                layout: {
                    scroll: !1,
                    footer: !1
                },
                sortable: !0,
                pagination: !0,
                toolbar: {
                    items: {
                        pagination: {
                            pageSizeSelect: [10, 20, 30, 50, 100]
                        }
                    }
                },
                search: {
                    input: $("#generalSearch")
                },
                columns: data
            }),
                $("#m_form_status").on("change",
                    function () {
                        t.search($(this).val(), "Status")
                    }),
                $("#m_form_type").on("change",
                    function () {
                        t.search($(this).val(), "Type")
                    }),
                $("#m_form_status, #m_form_type").selectpicker()

        }
    };
    jQuery(document).ready(function () {
        DatatableRemoteAjaxDemo.init();
    });
</script>

</html>